$OpenBSD$

Index: source/source/angelwrap/CMakeLists.txt
--- source/source/angelwrap/CMakeLists.txt.orig
+++ source/source/angelwrap/CMakeLists.txt
@@ -15,17 +15,10 @@ file(GLOB angelwrap_SOURCES
     "../gameshared/q_*.c"
 )
 
-if (${CMAKE_SYSTEM_NAME} MATCHES "Linux")
-	set(ANGELWRAP_PLATFORM_LIBRARIES "pthread")
-else ()
-        set(ANGELWRAP_PLATFORM_LIBRARIES "")
+if (UNIX AND NOT APPLE)
+	set(ANGELWRAP_PLATFORM_LIBRARIES pthread)
 endif()
 
 add_library(angelwrap SHARED ${angelwrap_SOURCES} ${angelwrap_HEADERS})
-target_link_libraries(angelwrap PRIVATE ${ANGELSCRIPT_LIBRARY} ${ANGELWRAP_PLATFORM_LIBRARIES})
+target_link_libraries(angelwrap PRIVATE angelscript ${ANGELWRAP_PLATFORM_LIBRARIES})
 qf_set_output_dir(angelwrap libs)
-
-# TODO: Remove this hack from here
-if (${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR MINGW)
-    add_dependencies(angelwrap ${ANGELSCRIPT})
-endif()
